{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- User Profile Card -->
            <div class="card bg-dark text-light mb-4">
                <div class="card-header">
                    <h5 class="mb-0">ðŸŽµ Audio Format Preferences</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('update_format_preference') }}" method="post">
                        <div class="form-group">
                            <label for="default_format">ðŸŽ§ Default Audio Format</label>
                            <select class="form-control" id="default_format" name="default_format">
                                <option value="flac" {% if user.default_format == 'flac' %}selected{% endif %}>FLAC (Lossless)</option>
                                <option value="wav" {% if user.default_format == 'wav' %}selected{% endif %}>WAV (Lossless)</option>
                                <option value="aac" {% if user.default_format == 'aac' %}selected{% endif %}>AAC (High Quality)</option>
                                <option value="m4a" {% if user.default_format == 'm4a' %}selected{% endif %}>M4A (High Quality)</option>
                                <option value="opus" {% if user.default_format == 'opus' %}selected{% endif %}>Opus (High Quality)</option>
                                <option value="vorbis" {% if user.default_format == 'vorbis' %}selected{% endif %}>Vorbis (High Quality)</option>
                                <option value="mp3" {% if user.default_format == 'mp3' %}selected{% endif %}>MP3 (Compatible)</option>
                            </select>
                            <small class="form-text text-muted">
                                If the selected format is not available, we'll automatically fall back to the next best quality format.
                            </small>
                        </div>
                        <button type="submit" class="btn btn-primary">ðŸ’¾ Save Format Preference</button>
                    </form>
                </div>
            </div>

            <!-- Username Update Card -->
            <div class="card bg-dark text-light mb-4">
                <div class="card-header">
                    <h5 class="mb-0">ðŸ‘¤ Update Username</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('update_user_username') }}" method="post">
                        <div class="form-group">
                            <label for="new_username">New Username</label>
                            <input type="text" class="form-control" id="new_username" name="new_username" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Update Username</button>
                    </form>
                </div>
            </div>

            <!-- Password Update Card -->
            <div class="card bg-dark text-light">
                <div class="card-header">
                    <h5 class="mb-0">ðŸ”‘ Change Password</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('change_password') }}" method="post">
                        <div class="form-group">
                            <label for="current_password">Current Password</label>
                            <input type="password" class="form-control" id="current_password" name="current_password" required>
                        </div>
                        <div class="form-group">
                            <label for="new_password">New Password</label>
                            <input type="password" class="form-control" id="new_password" name="new_password" required>
                        </div>
                        <div class="form-group">
                            <label for="confirm_password">Confirm New Password</label>
                            <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Update Password</button>
                    </form>
                </div>
            </div>

            {% if is_admin %}
            <!-- Admin Links -->
            <div class="mt-4">
                <a href="{{ url_for('admin_users') }}" class="btn btn-info">ðŸ‘¥ Manage Users</a>
                <a href="{{ url_for('admin_queue') }}" class="btn btn-info">ðŸ“¥ Manage Download Queue</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
.form-control {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
}
.form-control:focus {
    background-color: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
    color: #fff;
}
.form-control option {
    background-color: #343a40;
    color: #fff;
}
</style>
{% endblock %} 